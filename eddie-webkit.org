#+TITLE: Eddie's Configuration WebKit

Style settings for editing WebKit C++.

#+BEGIN_SRC emacs-lisp
(message "Loading Eddie's configuration WebKitâ€¦")
#+END_SRC

#+BEGIN_SRC emacs-lisp
  ;; https://chromium.googlesource.com/chromium/src/+/master/docs/emacs.md
  (use-package google-c-style
    :config
    (c-add-style "Google" google-c-style)
    (c-add-style "WebKit" '("Google"
                            (c-basic-offset . 4)
                            (c-offsets-alist . ((innamespace . 0)
                                                (access-label . -)
                                                (case-label . 0)
                                                (member-init-intro . +)
                                                (topmost-intro . 0)
                                                (arglist-cont-nonempty . +))))))

  ;; https://bugs.webkit.org/show_bug.cgi?id=72483
  (defun webkit-c++-mode ()
    "C++ mode with adjusted defaults for use with WebKit."
    (interactive)
    (c++-mode)
    (c-set-style "WebKit")
    (setq indent-tabs-mode nil)
    (setq c-basic-offset 4))

  (setq auto-mode-alist (cons '("/WebKit/.*\\.[ch|cpp]*$" . webkit-c++-mode)
                              auto-mode-alist))
  (setq auto-mode-alist (cons '("/JavaScriptCore/.*\\.[ch|cpp]*$" . webkit-c++-mode)
                              auto-mode-alist))

#+END_SRC
